{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Daim\\\\Desktop\\\\Reat Meal\\\\src\\\\store\\\\ContextProvider.jsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport ContextObj from \"./ContextObj\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst defaultState = {\n  items: [],\n  totalAmount: 0\n};\n\nconst reducer = (state, actions) => {\n  if (actions.type === \"ADD\") {\n    const totalAmount = state.totalAmount + actions.item.price * actions.item.amount; // ! Check whether it exist in array\n\n    const findItem = state.items.find(item => item.id === actions.item.id); // ! If not exists than add\n\n    if (!findItem) {\n      return {\n        items: [...state.items, actions.item],\n        totalAmount\n      };\n    } else {\n      // ! if exist than change the amount of existing item\n      const addExistingAndArray = state.items.map(item => {\n        if (item.id === actions.item.id) {\n          return { ...item,\n            amount: item.amount + actions.item.amount\n          };\n        }\n\n        return item;\n      });\n      return {\n        items: addExistingAndArray,\n        totalAmount\n      };\n    }\n  }\n\n  if (actions.type === \"REMOVE\") {\n    let existing;\n    const remainingItem = state.items.map(item => {\n      if (item.id === actions.id) {\n        existing = item;\n\n        if (item.amount === 1) {\n          return null;\n        }\n\n        return { ...item,\n          amount: --item.amount\n        };\n      } else {\n        return item;\n      }\n    }).filter(item => item);\n    const totalAmount = Math.trunc(state.totalAmount - existing.price);\n    return {\n      items: [...remainingItem],\n      totalAmount\n    };\n  }\n\n  return state;\n};\n\nconst ContextProvider = props => {\n  _s();\n\n  const [state, setState] = React.useReducer(reducer, defaultState);\n\n  const addItem = item => {\n    setState({\n      type: \"ADD\",\n      item\n    });\n  };\n\n  const removeItem = id => {\n    setState({\n      type: \"REMOVE\",\n      id\n    });\n  };\n\n  const store = { ...state,\n    addItem,\n    removeItem\n  };\n  return /*#__PURE__*/_jsxDEV(ContextObj.Provider, {\n    value: store,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ContextProvider, \"txVEgAPgYq0FBgMRvvuEy56bcnI=\");\n\n_c = ContextProvider;\nexport default ContextProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"ContextProvider\");","map":{"version":3,"sources":["C:/Users/Daim/Desktop/Reat Meal/src/store/ContextProvider.jsx"],"names":["React","ContextObj","defaultState","items","totalAmount","reducer","state","actions","type","item","price","amount","findItem","find","id","addExistingAndArray","map","existing","remainingItem","filter","Math","trunc","ContextProvider","props","setState","useReducer","addItem","removeItem","store","children"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport ContextObj from \"./ContextObj\";\r\n\r\nconst defaultState = {\r\n  items: [],\r\n  totalAmount: 0,\r\n};\r\nconst reducer = (state, actions) => {\r\n  if (actions.type === \"ADD\") {\r\n    const totalAmount =\r\n      state.totalAmount + actions.item.price * actions.item.amount;\r\n    // ! Check whether it exist in array\r\n    const findItem = state.items.find((item) => item.id === actions.item.id);\r\n    // ! If not exists than add\r\n    if (!findItem) {\r\n      return { items: [...state.items, actions.item], totalAmount };\r\n    } else {\r\n      // ! if exist than change the amount of existing item\r\n      const addExistingAndArray = state.items.map((item) => {\r\n        if (item.id === actions.item.id) {\r\n          return { ...item, amount: item.amount + actions.item.amount };\r\n        }\r\n        return item;\r\n      });\r\n      return { items: addExistingAndArray, totalAmount };\r\n    }\r\n  }\r\n\r\n  if (actions.type === \"REMOVE\") {\r\n    let existing;\r\n    const remainingItem = state.items\r\n      .map((item) => {\r\n        if (item.id === actions.id) {\r\n          existing = item;\r\n          if (item.amount === 1) {\r\n            return null;\r\n          }\r\n          return { ...item, amount: --item.amount };\r\n        } else {\r\n          return item;\r\n        }\r\n      })\r\n      .filter((item) => item);\r\n    const totalAmount = Math.trunc(state.totalAmount - existing.price);\r\n\r\n    return {\r\n      items: [...remainingItem],\r\n      totalAmount,\r\n    };\r\n  }\r\n\r\n  return state;\r\n};\r\nconst ContextProvider = (props) => {\r\n  const [state, setState] = React.useReducer(reducer, defaultState);\r\n  const addItem = (item) => {\r\n    setState({ type: \"ADD\", item });\r\n  };\r\n  const removeItem = (id) => {\r\n    setState({ type: \"REMOVE\", id });\r\n  };\r\n  const store = {\r\n    ...state,\r\n    addItem,\r\n    removeItem,\r\n  };\r\n  return (\r\n    <ContextObj.Provider value={store}>{props.children}</ContextObj.Provider>\r\n  );\r\n};\r\n\r\nexport default ContextProvider;\r\n"]},"metadata":{},"sourceType":"module"}